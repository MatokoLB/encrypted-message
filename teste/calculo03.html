<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>calculo3</title>
</head>

<body>

    <form action="">
        <textarea id="msg" type="text"></textarea>
        <input type="number" name="chave" id="chave" min="1" max="26" required placeholder="1 ate 26">incremento</input>
        <button id="btn">enviar</button>

    </form>
    <div id="rep"></div>
    <div id="rep2"></div>


    <script defer>
        const msg = document.querySelector("#msg");
        const key = document.querySelector("#chave");
        const btn = document.querySelector("#btn");
        const rep = document.querySelector("#rep");
        const rep2 = document.querySelector("#rep2");


        btn.addEventListener('click', (e) => {
            e.preventDefault();

            let textoCofificado = '';
            let letraCodificada = '';
            let chave = parseInt(key.value);
            let tamanhoTexto = msg.value.length;
            let textoOriginal = msg.value;


            for (let i = 0; i < tamanhoTexto; i++) {

                let codigoLetra = textoOriginal.charCodeAt(i);
                let lcodigoChave = chave + codigoLetra;

                if (/*codigoLetra >= 65 && codigoLetra <= 90 ||*/
                    codigoLetra >= 97 && codigoLetra <= 122) {
                    chave = parseInt(key.value)
                } else {
                    chave = 0
                }

                let proximaLetra = String.fromCharCode(codigoLetra + chave).toLowerCase();

                  C = 0;
                while (lcodigoChave >= 123 + C && lcodigoChave <=148 && codigoLetra <= 122 && C <= 26) {
                    proximaLetra = String.fromCharCode(97 + C).toLowerCase();
                    C++
                }



                let letraOriginal = textoOriginal.charAt(i);

                let resetAlfabertoMasc = String.fromCharCode(64 + chave);
                let resetAlfabertoMinu = String.fromCharCode(96 + chave);


                letraCodificada = proximaLetra
                textoCofificado = textoCofificado + letraCodificada;

                /*letraCodificada = proximaLetra
                textoCofificado = textoCofificado.concat(letraCodificada);*/
                //abcdefghijklmnopqrstuvwxyz//


                rep.innerHTML =
                    `<P> letra origiral: ${letraOriginal}</P>
            <P>letra codigo da letra: ${codigoLetra}</P>
            <P>letra chave de incremeto: ${chave}</P> 
            <P>chave para retorna alfabeto: ${resetAlfabertoMinu}</P> 
            <P>codigo da letra + chave de incremeto: ${lcodigoChave}</P> 
            <P>nova letra ${proximaLetra}</P> 
            <P>tamanho do texto : ${tamanhoTexto}</P>`

                rep2.innerHTML = ` texto normal :${textoOriginal}  
            <br><br>criptografado:${textoCofificado}`

            }
        })

    </script>

</body>

</html>